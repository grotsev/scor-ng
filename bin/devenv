#!/bin/bash

bin/wiremock &
WIREMOCK_PID=$!
echo "== wiremock ${WIREMOCK_PID}"
sleep 1

bin/postgrest &
POSTGREST_PID=$!
echo "== postgrest ${POSTGREST_PID}"
sleep 1

bin/postgrest-ws &
POSTGREST_WS_PID=$!
echo "== postgrest-ws ${POSTGREST_WS_PID}"
sleep 1

bin/http_port &
HTTP_PORT_PID=$!
echo "== http_port ${HTTP_PORT_PID}"
sleep 1

cd elm
elm-reactor &
ELM_REACTOR_PID=$!
cd ..
echo "== elm-reactor ${ELM_REACTOR_PID}"
sleep 1

read -p $'== Press enter to exit\n'

pkill --parent $ELM_REACTOR_PID
pkill --parent $HTTP_PORT_PID
pkill --parent $POSTGREST_WS_PID
pkill --parent $POSTGREST_PID
pkill --parent $WIREMOCK_PID
